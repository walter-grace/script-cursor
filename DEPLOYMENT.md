# Deployment Guide for ScriptCursor

## Deploying to Vercel

Vercel is the recommended deployment platform for ScriptCursor as it provides seamless integration with NeonDB and Next.js.

### Prerequisites

1. A [Vercel account](https://vercel.com)
2. A [Neon account](https://neon.tech) for the database
3. An [OpenRouter API key](https://openrouter.ai) for AI features

### Step 1: Prepare Your Repository

1. Initialize git (if not already done):
   ```bash
   git init
   git add .
   git commit -m "Initial commit"
   ```

2. Push to GitHub:
   ```bash
   git remote add origin <your-github-repo-url>
   git push -u origin main
   ```

### Step 2: Set Up Neon Database

1. Go to [Neon Console](https://console.neon.tech)
2. Create a new project
3. Copy your connection string (it will look like: `postgresql://user:password@host/dbname?sslmode=require`)
4. Keep this connection string handy for Step 4

### Step 3: Deploy to Vercel

1. Go to [Vercel Dashboard](https://vercel.com/dashboard)
2. Click "Add New Project"
3. Import your GitHub repository
4. Vercel will auto-detect Next.js settings

### Step 4: Configure Environment Variables

In your Vercel project settings, add these environment variables:

#### Required Variables:

- **`DATABASE_URL`**: Your Neon connection string
  - Format: `postgresql://user:password@host/dbname?sslmode=require`
  - You can get this from Neon dashboard → Project Settings → Connection String

- **`OPENROUTER_API_KEY`**: Your OpenRouter API key
  - Get it from [OpenRouter Dashboard](https://openrouter.ai/keys)

#### Optional Variables:

- **`NEXT_PUBLIC_APP_URL`**: Your production URL (auto-set by Vercel, but you can override)
  - Usually: `https://your-project.vercel.app`

### Step 5: Run Database Migrations

After deployment, you need to set up your database schema. You have two options:

#### Option A: Using Vercel CLI (Recommended)

1. Install Vercel CLI:
   ```bash
   npm i -g vercel
   ```

2. Link your project:
   ```bash
   vercel link
   ```

3. Pull environment variables:
   ```bash
   vercel env pull .env.local
   ```

4. Run migrations:
   ```bash
   npm run db:push
   ```

#### Option B: Using Neon SQL Editor

1. Go to Neon Console → SQL Editor
2. Run the migration SQL manually (generated by `npm run db:generate`)

### Step 6: Verify Deployment

1. Visit your Vercel deployment URL
2. You should see the ScriptCursor home page
3. Try creating a new script to test database connectivity
4. Test AI features (Cmd+K) to verify OpenRouter integration

### Troubleshooting

#### Database Connection Issues

- Verify `DATABASE_URL` is set correctly in Vercel environment variables
- Check that your Neon database allows connections from Vercel IPs
- Ensure SSL mode is enabled (`?sslmode=require`)

#### AI Features Not Working

- Verify `OPENROUTER_API_KEY` is set in Vercel
- Check Vercel function logs for API errors
- Ensure you have credits/balance in your OpenRouter account

#### Build Errors

- Check that all dependencies are in `package.json`
- Verify TypeScript compilation passes locally: `npm run build`
- Check Vercel build logs for specific errors

### Post-Deployment

1. **Set up custom domain** (optional):
   - Go to Vercel project → Settings → Domains
   - Add your custom domain

2. **Enable analytics** (optional):
   - Vercel Analytics is available in project settings

3. **Set up monitoring**:
   - Consider adding error tracking (Sentry, etc.)
   - Monitor API usage and costs

### Environment Variables Reference

```env
# Required
DATABASE_URL=postgresql://user:password@host/dbname?sslmode=require
OPENROUTER_API_KEY=sk-or-v1-...

# Optional (auto-set by Vercel)
NEXT_PUBLIC_APP_URL=https://your-project.vercel.app
VERCEL_URL=your-project.vercel.app
```

### Local Development After Deployment

To test locally with production-like settings:

1. Pull environment variables:
   ```bash
   vercel env pull .env.local
   ```

2. Run development server:
   ```bash
   npm run dev
   ```

### Continuous Deployment

Vercel automatically deploys on every push to your main branch. For production:

1. Use branch-based deployments for staging
2. Set up preview deployments for PRs
3. Use production branch protection

---

**Need Help?** Check the [Vercel Documentation](https://vercel.com/docs) or [Neon Documentation](https://neon.tech/docs).

